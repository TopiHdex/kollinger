---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';
import Cover from '../assets/images/kust-cover.png';
import CoverMaterials from '../assets/images/materials-cover.png';
import Bronze from '../assets/images/materials/bronze.png';
import Aluminum from '../assets/images/materials/aluminum.png';
import Zink from '../assets/images/materials/zink.png';
import Messing from '../assets/images/materials/messing.png';
import Silber from '../assets/images/materials/silber.png';
import Tombak from '../assets/images/materials/tombak.png';
import Others from '../assets/images/materials/others.png';
---

<Layout>
    <div class="hero">
        <video class="image parallax" autoplay muted loop controls>
            <source src="https://occ87lmc8c.ufs.sh/f/amuZeWyiXfpxXfHjg5bbHsP3C5tyvgx2ETmcLdIflAGwkZYi" type="video/mp4">
        </video>
    </div>
    <div class="first-part">
        <div class="left">
            <h1 class="on-enter">UNSER KUNSTGUSS</h1>
            <p class="on-enter">PRÄZISION FÜR KUNST</p>
        </div>
        <div class="right">
            <p class="p1 on-enter">
                Seit 1993 steht die Kunstgießerei Kollinger für höchste Qualität im Kunstguss
                und technischen Feinguss. Mit einem feinen Gespür für Form und Material
                garantieren wir die sorgfältige Bearbeitung und individuelle Behandlung jedes
                Objekts – vom Unikat bis zur Kleinserie.
            </p>
            <p class="p2 on-enter">
                Unsere Arbeitsprozesse sind flexibel, unsere Lösungen maßgeschneidert.
                Ob filigrane Skulptur oder komplexer Prototyp – wir setzen Kundenwünsche
                präzise um und passen uns dabei stets aktuellen Anforderungen und Trends an.
            </p>
        </div>
    </div>
    <div class="second-part">
        <div class="items">
            <div class="hoverable">
                <div class="title">OBERFLÄCHENVEREDELUNG</div> 
                <div class="more">
                    von Patina über Komplexe Lackierungen bis hin zu vergoldung
                </div>
            </div>
            <div class="hoverable">
                <div class="title">EINZELANFERTIGUNGEN</div>
                <div class="more">
                    sowie Klein- und vorserien im Sand- oder Feinguss
                </div>
            </div>
            <div class="hoverable">
                <div class="title">INDIVIDUELLES MODELL</div>
                <div class="more">
                    erstellen wir exakt nach ihrer vorlage
                </div>
            </div>
            <div class="hoverable">
                <div class="title">TECHNISCHE PROTOTYPEN</div>
                <div class="more">
                    vom Millimeter-Bauteil bis zur Grossplastik
                </div>
            </div>
            <div class="hoverable">
                <div class="title">MODELLE UND ABFORMUNGEN</div>
                <div class="more">
                    vom Millimeter-Bauteil bis zur Grossplastik
                </div>
            </div>
            <div class="hoverable">
                <div class="title">ERWEITERTE LEISTUNGEN</div>
                <div class="more">
                    wie Montage, technische Anpassungen oder Sonderanfertigungen
                </div>
            </div>
        </div>
    </div>
    <section class="third-part">
        <div class="hero2">
            <Image class="image parallax" src={CoverMaterials} alt="Image 1" />
        </div>
        <div class="materials">
            <h2 class="header"><span>UNSERE MATERIALIEN</span></h2>
            <div class="materialsList">
                <article class="material">
                    <div class="materialImg">
                        <Image src={Bronze} alt="Image 1" />
                    </div>
                    <p class="name">Bronze</p>
                </article>
                <article class="material">
                    <div class="materialImg">
                        <Image src={Zink} alt="Image 1" />
                    </div>
                    <p class="name">Zink</p>
                </article>
                <article class="material">
                    <div class="materialImg">
                        <Image src={Messing} alt="Image 1" />
                    </div>
                    <p class="name">Messig</p>
                </article>
                <article class="material">
                    <div class="materialImg">
                        <Image src={Aluminum} alt="Image 1" />
                    </div>
                    <p class="name">Aluminium</p>
                </article>
                <article class="material">
                    <div class="materialImg">
                        <Image src={Silber} alt="Image 1" />
                    </div>
                    <p class="name">Silber</p>
                </article>
                <article class="material">
                    <div class="materialImg">
                        <Image src={Tombak} alt="Image 1" />
                    </div>
                    <p class="name">TOMBAK / SILIZIUMBRONZE</p>
                </article>
                <article class="material">
                    <div class="materialImg">
                        <Image src={Others} alt="Image 1" />
                    </div>
                    <p class="name">SONDERLEGIERUNGEN</p>
                </article>
            </div>
        </div>
    </section>

    <section class="final"></section>
</Layout>

<script>
import gsap from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
import Lenis from '@studio-freight/lenis';

gsap.registerPlugin(ScrollTrigger);

const lenis = new Lenis();

lenis.on('scroll', ScrollTrigger.update);

gsap.ticker.add((time) => {
    lenis.raf(time * 1000);
});

gsap.ticker.lagSmoothing(0);

gsap.from(".on-enter", {
    scrollTrigger: {
        trigger: ".first-part",
        start: "top 90%",
        toggleActions: "play none none none",
    },
    y: 40,
    opacity: 0,
    stagger: 0.15,
    duration: 1,
    ease: "power2.out"
});

gsap.to(".hero .parallax", {
    scrollTrigger: {
        trigger: ".hero",
        start: "top top",
        end: "bottom top",
        scrub: true
    },
    y: 200,
    filter: "blur(8px)",
    scale: 1.01,
});

gsap.to(".first-part", {
  scrollTrigger: {
    trigger: ".first-part",
    start: "top top",
    end: "bottom top",
    scrub: true
  },
  y: -100
});

gsap.from(".second-part .hoverable", {
    scrollTrigger: {
        trigger: ".second-part",
        start: "top 65%",
        end: "top 30%",
        toggleActions: "play none none none",
        scrub: true,
    },
    y: 40,
    opacity: 0,
    stagger: 0.15,
    ease: "power2.out"
});

const tl = gsap.timeline({
    scrollTrigger: {
        scrub: true,
        pin: true,
        trigger: ".second-part .items",
        start: "60% 40%",
        endTrigger: ".second-part",
        end: "bottom 50%",
    },
});
tl.from(".second-part .more", {
    y: 40,
    opacity: 0,
    stagger: 0.5,
    ease: "power2.out"
});

gsap.to(".hero2 .parallax", {
    scrollTrigger: {
        trigger: ".hero2",
        start: "top 50%",
        end: "bottom top",
        scrub: true
    },
    y: 100,
});

const tlMaterials = gsap.timeline({
    scrollTrigger: {
        scrub: true,
        pin: true,
        trigger: ".materials",
        start: "50% 50%",
        endTrigger: ".third-part",
        end: "bottom 50%",
    },
});
tlMaterials
    .add('start')
    .from(
        ".materials .materialsList",
        { xPercent: -100, ease: "power2.out" },
    )
    .from(".materialsList .material", {
        scale: 0.8,
        stagger: -0.1,
        ease: "power2.out"
    }, "start");
</script>

<style>
.hero {
    padding-top: 60px;
    overflow: hidden;

    .image {
        width: 100%;
        height: 70vh;
        object-fit: cover;
    }

}

.first-part {
    display: grid;
    grid-template-columns: 11fr 13fr;
    gap: 2rem;
    padding-top: 2rem;
    background-color: white;

    .left {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        justify-content: flex-start;

        h1 {
            font-size: 4rem;
            font-weight: 300;
            margin: 0;
        }

        p {
            font-weight: bold;
        }
    }

    .right {
        margin-top: 2.5rem;
        border-top: 1px solid black;
        padding: 2rem 4rem;

        p {
            max-width: 580px;
        }
    }
}

.second-part {
    padding-top: 150px;
    margin-bottom: 10rem;
    height: 150vh;

    .items {
        display: flex;
        width: 100%;
        justify-content: space-evenly;
        height: 135px;

        .hoverable {
            flex-grow: 1;
            border-right: 1px solid black;
            padding: 1rem 0.5rem;
            height: 1.125rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            gap: 1.75rem;

            &:last-child {
                border: 0;
            }

            .title {
                font-weight: bold;
            }

            .more {
                max-width: 190px;
            }
        }
    }
}

.third-part {
    height: 300vh;

    .hero2 {
        height: 560px;
        width: 100%;
        overflow: hidden;

        img {
            width: 100%;
            height: calc(100% + 100px);
            object-fit: cover;
            transform: translateY(-120px);
        }
    }

    .materials {
        .materialsList {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1rem;
            padding: 0 1.75rem;

            .material {
                width: 100%;

                .materialImg {
                    width: 100%;
                    aspect-ratio: 1 / 1;

                    img {
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                    }
                }

                .name {
                    font-weight: bold;
                    text-align: center;
                }
            }
        }
    }
}

.header {
    position: relative;
    font-size: 4rem;
    font-weight: 300;
    text-align: end;
    padding: 3rem 0;
    height: 75px;
    margin: 0;

    span {
        background-color: white;
        position: absolute;
        right: 0;
        top: 0;
        bottom: 0;
        margin: auto 0;
        padding: 0 1.75rem;
        height: 75px;
    }

    &::before {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        height: 0px;
        width: 100%;
        border-bottom: 1px solid black;
        margin: auto 0;
    }
}

.final {
    height: 100vh
}
</style>
